"use strict";!function(e){e.freehand=e.freehand||{},freehand.init=function(){document.body.classList.add("animate-fn"),freehand.freehandSelectors(),freehand.scrollTo()},freehand.initDesktop=function(){freehand.heroAnimation(),freehand.fadeInFeatureText(),freehand.fadeInBackgroundText(),freehand.animatedLines(),freehand.animatedTour()},freehand.freehandSelectors=function(){freehand.cache={},freehand.cache.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,freehand.cache.$hero=landing.cache.$page.find("#hero"),freehand.cache.$video=landing.cache.$page.find("#video"),freehand.cache.$featuresSection=landing.cache.$page.find("#features"),freehand.cache.$featureItem=freehand.cache.$featuresSection.children(".feature"),freehand.cache.controller=new ScrollMagic.Controller;document.body.classList.contains("platform-")},freehand.onResize=function(){window.addEventListener("resize",scrollTo)},freehand.scrollTo=function(){var e=$(".scroll-to"),n=freehand.cache.windowWidth>767?"130":"80",a=function(a,t){e.click(function(){$("body, html").animate({scrollTop:a-n},900)})},t=(freehand.cache.$video[0].getBoundingClientRect(),freehand.cache.$video.offset().top);window.addEventListener("resize",a(t))},freehand.heroAnimation=function(){freehand.cache.$heroCopy=document.getElementById("hero-copy"),freehand.cache.$hero=document.getElementById("hero-animation");var e=bodymovin.loadAnimation({container:freehand.cache.$hero,renderer:"svg",loop:!1,autoplay:!1,prerender:!0,path:"/subsystems/landing/assets/img/page/freehand/hero.json"}),n=freehand.cache.$heroCopy.querySelector("h1 u"),a=function(){if(!n)return e;var a=freehand.cache.$hero.querySelector("svg > g > g:nth-child(8)"),t=n.getBoundingClientRect(),r=t.left/(window.innerWidth/1486)+20,o=t.top-t.height-50;return a.style.transform="translate("+r+"px,"+o+"px)",e},t=function(){var e=new TimelineLite,n=freehand.cache.$hero;e.add(TweenLite.set(n,{autoAlpha:1}),2)},r=function(){var e=freehand.cache.$hero.querySelector("svg > g > g:nth-child(9)");e.classList.add("scroll-to")};e.addEventListener("DOMLoaded",function(){t(),a().play(),r()}),window.addEventListener("resize",a)},freehand.fadeInFeatureText=function(){freehand.cache.$featureCopy=freehand.cache.$featureItem.find(".feature-copy"),freehand.cache.$featureCopy.each(function(){var e=$(this),n=!!e.parent(".flex-container").hasClass("reverse"),a=new TimelineLite,t=[e.find("h2"),e.find("p"),e.find(".inline-cta")],r="+=20";n&&(r="-=20"),a.staggerFrom(t,.3,{x:r,autoAlpha:0,ease:Power1.easeOut},.15);var o=new ScrollMagic.Scene({triggerElement:this,triggerHook:.75}).setTween(a).addTo(freehand.cache.controller);landing.cache.localEnv&&o.addIndicators()})},freehand.fadeInBackgroundText=function(){freehand.cache.$backgroundText=freehand.cache.$featureItem.find(".bg-text"),freehand.cache.$backgroundText.each(function(){var e=$(this),n=!!e.closest(".flex-container").hasClass("reverse"),a=new TimelineLite,t=(window.outerWidth,e.closest(".flex-container")[0].getBoundingClientRect().width,e[0].getBoundingClientRect().width,e[0].getBoundingClientRect().left,e[0].getBoundingClientRect().left,"+=20"),r="-=100%";n&&(t="-=20",r="+=50%"),a.from(e,.1,{x:t,autoAlpha:0,ease:Power1.easeOut}).to(e,.8,{x:r,autoAlpha:.03,ease:Power1.easeOut});var o=new ScrollMagic.Scene({triggerElement:this,triggerHook:.9,duration:"120%"}).setTween(a).addTo(freehand.cache.controller);landing.cache.localEnv&&o.addIndicators()})},freehand.animatedLines=function(){freehand.cache.animatedLines=landing.cache.$page.find(".animated-lines"),freehand.cache.animatedLines.each(function(){var e=$(this),n=new TimelineLite,a=e.find("path"),t=1;a.each(function(){var e=$(this).get(0),a=e.getTotalLength(),r=Math.round(a);a.toFixed(3);e.setAttribute("style","stroke-dashoffset: "+r+"px; stroke-dasharray: "+r+"px;");var o=.15*t;t++,n.add(TweenLite.set(e,{autoAlpha:1,immediateRender:!1}),o),n.add(TweenLite.to(e,.5,{strokeDashoffset:0,ease:Power4.easeOut}),o)});var r=new ScrollMagic.Scene({triggerElement:e,triggerHook:.75}).setTween(n).addTo(freehand.cache.controller);landing.cache.localEnv&&r.addIndicators({name:e.attr("class")})})},freehand.animatedTour=function(){var e=document.body.getElementsByClassName("animated-tour"),n=1.33;$(e).each(function(){var e=new TimelineLite,a=this.getElementsByClassName("group"),t=.66,r=0;$(a).each(function(){for(var a=new TimelineLite,o=this.getElementsByTagName("path"),i=this.getElementsByTagName("image"),d=this.getElementsByClassName("name"),c=t*r,h=0;h<o.length;h++){var s=o[h].getTotalLength(),l=Math.round(s);s.toFixed(3);o[h].setAttribute("style","stroke-dashoffset: "+l+"px; stroke-dasharray: "+l+"px;"),a.add(TweenLite.set(o[h],{autoAlpha:1,immediateRender:!1}),0),a.add(TweenLite.to(o[h],n,{strokeDashoffset:0,ease:Power4.easeOut}),0)}for(var h=0;h<i.length;h++)a.add(TweenLite.fromTo(i[h],.25*n,{autoAlpha:0},{autoAlpha:1,ease:Power4.easeOut}),.75*n);for(var h=0;h<d.length;h++)a.add(TweenLite.fromTo(d[h],.25*n,{autoAlpha:0},{autoAlpha:1,ease:Power4.easeOut}),1*n);r++,e.add(a,c)});var o=new ScrollMagic.Scene({triggerElement:this,triggerHook:.75}).setTween(e).addTo(freehand.cache.controller);landing.cache.localEnv&&o.addIndicators()})},$(freehand.init),window.innerWidth>767&&$(freehand.initDesktop)}(window);